{"version":3,"sources":["webpack:///D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue?79cf","webpack:///D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue?53bd","webpack:///D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue?1b30","webpack:///D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue?139f","webpack:///D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue"],"names":["name","data","newStyleStr","preview","props","node","type","Object","default","methods","wxParseImgTap","e","src","currentTarget","dataset","parent","$parent","wxParseImgLoad","mp","detail","width","height","recal","wxAutoImageCal","imageheight","imageWidth","attr","padding","mode","styleStr","imageHeightStyle","originalWidth","originalHeight","windowWidth","$screen","results","removeImageUrl"],"mappings":"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","file":"components/u-parse/components/wxParseImg.js","sourcesContent":["import { render, staticRenderFns } from \"./wxParseImg.vue?vue&type=template&id=56512c65&\"\nimport script from \"./wxParseImg.vue?vue&type=script&lang=js&\"\nexport * from \"./wxParseImg.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-hot-reload-api\\\\dist\\\\index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!module.hot.data) {\n      api.createRecord('56512c65', component.options)\n    } else {\n      api.reload('56512c65', component.options)\n    }\n    module.hot.accept(\"./wxParseImg.vue?vue&type=template&id=56512c65&\", function () {\n      api.rerender('56512c65', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"D:/Web/Project/weixin/wx-talk/components/u-parse/components/wxParseImg.vue\"\nexport default component.exports","export * from \"-!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-hbuilderx\\\\packages\\\\webpack-uni-nvue-loader\\\\lib\\\\templateLoader.js??vue-loader-options!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxParseImg.vue?vue&type=template&id=56512c65&\"","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import mod from \"-!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxParseImg.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-custom-block-loader\\\\index.js??ref--0-1!E:\\\\工具\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./wxParseImg.vue?vue&type=script&lang=js&\"","//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n//\r\n\r\nexport default {\r\n  name: 'wxParseImg',\r\n  data() {\r\n    return {\r\n      newStyleStr: '',\r\n      preview: true,\r\n    };\r\n  },\r\n  props: {\r\n    node: {\r\n      type: Object,\r\n      default() {\r\n        return {};\r\n      },\r\n    },\r\n  },\r\n  methods: {\r\n    wxParseImgTap(e) {\r\n      if (!this.preview) return;\r\n      const { src } = e.currentTarget.dataset;\r\n      if (!src) return;\r\n      let parent = this.$parent;\r\n      while(!parent.preview || typeof parent.preview !== 'function') {// TODO 遍历获取父节点执行方法\r\n      \tparent = parent.$parent;\r\n      }\r\n      parent.preview(src, e);\r\n    },\r\n    // 图片视觉宽高计算函数区\r\n    wxParseImgLoad(e) {\r\n      const { src } = e.currentTarget.dataset;\r\n      if (!src) return;\r\n      const { width, height } = e.mp.detail;\r\n      const recal = this.wxAutoImageCal(width, height);\r\n      const { imageheight, imageWidth } = recal;\r\n      const { padding, mode } = this.node.attr;\r\n      const { styleStr } = this.node;\r\n      const imageHeightStyle = mode === 'widthFix' ? '' : `height: ${imageheight}px;`;\r\n      this.newStyleStr = `${styleStr}; ${imageHeightStyle}; width: ${imageWidth}px; padding: 0 ${+padding}px;`;\r\n    },\r\n    // 计算视觉优先的图片宽高\r\n    wxAutoImageCal(originalWidth, originalHeight) {\r\n      // 获取图片的原始长宽\r\n      const { padding } = this.node.attr;\r\n      const windowWidth = this.node.$screen.width - (2 * padding);\r\n      const results = {};\r\n\r\n      if (originalWidth < 60 || originalHeight < 60) {\r\n        const { src } = this.node.attr;\r\n\t\t\t\tlet parent = this.$parent;\r\n\t\t\t\twhile(!parent.preview || typeof parent.preview !== 'function') {\r\n\t\t\t\t\tparent = parent.$parent;\r\n\t\t\t\t}\r\n\t\t\t\tparent.removeImageUrl(src);\r\n        this.preview = false;\r\n      }\r\n\r\n      // 判断按照那种方式进行缩放\r\n      if (originalWidth > windowWidth) {\r\n        // 在图片width大于手机屏幕width时候\r\n        results.imageWidth = windowWidth;\r\n        results.imageheight = windowWidth * (originalHeight / originalWidth);\r\n      } else {\r\n        // 否则展示原来的数据\r\n        results.imageWidth = originalWidth;\r\n        results.imageheight = originalHeight;\r\n      }\r\n\r\n      return results;\r\n    },\r\n  },\r\n};\r\n"],"sourceRoot":""}